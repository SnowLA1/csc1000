<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Rent.ie - Preview</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="index.html">ğŸ  <span>Rent<span class="dot">.ie</span></span></a>
    <nav class="nav" data-auth>
      <a href="index.html">Home</a>
      <a href="listings.html">Listings</a>
    </nav>
  </header>

  <main class="page preview-layout">
    <div style="height:70vh;border-radius:12px;overflow:hidden;">
      <img src="./entrance.png" alt="Street view" style="width:100%;height:100%;object-fit:cover;"/>
    </div>

    <aside class="preview-side">
      <div class="preview-title" id="title">Loading...</div>
      <div class="badge">ğŸ›ï¸ <span id="beds">0</span> beds</div>
      <div class="preview-price" id="price"></div>

      <div class="icon-row">
        <button title="Like">ğŸ‘</button>
        <button title="Share"><a id="lobbyLink" title="Lobby of interested people" style="text-decoration:none;">ğŸ‘¥</a></button>
        <button title="Message">âœ‰ï¸</button>
      </div>

      <div style="font-size:14px;color:#333;line-height:1.5;">
        Bright, well-located rental. Close to transit, cafes, and city centre.
      </div>

      
    </aside>
  </main>

  <script src="data.js"></script>
  <script src="app.js"></script>
  <script>
    // Fill details from query string
    document.addEventListener("DOMContentLoaded", ()=>{
      const params = new URLSearchParams(location.search);
      const id = Number(params.get("id")||1);
      const listing = window.LISTINGS.find(x=>x.id===id) || window.LISTINGS[0];

      document.getElementById("title").textContent =
        `${listing.title}, ${listing.area}, Co. Ireland`;
      document.getElementById("beds").textContent = listing.beds;
      document.getElementById("price").textContent =
        listing.priceMonthly ? `${money(listing.priceMonthly)} per month` :
        listing.priceWeekly ? `${money(listing.priceWeekly)} per week` : "";
      
      // If later you store per-listing embed urls:
      // document.getElementById("streetFrame").src = listing.streetEmbed;
      const lobbyA = document.getElementById("lobbyLink");
      if (lobbyA) lobbyA.href = `lobby.html?id=${listing.id}`;

    });
  </script>
</body>
</html>
